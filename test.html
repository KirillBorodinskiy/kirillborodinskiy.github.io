<!DOCTYPE html>
<html>
<head>
    <title>CanvasJS Chart on Scroll</title>
    <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
    <style>
        body, html {
            height: 100%;
            margin: 0;
        }
        .chartContainer {
            height: 400px;
            width: 100%;
            margin: 50px auto;
        }
    </style>
</head>
<body>

<div style="height:1500px;">
    <div id="chartContainer" class="chartContainer"></div>
</div>

<script>
    // JavaScript for Chart and Scroll Event will go here
</script>

</body>
</html>

<script>
window.onload = function() {
    var chartRendered = false;

    function renderChart() {
        var chart = new CanvasJS.Chart("chartContainer", {
            backgroundColor: "transparent", // No background
            data: [{
                type: "doughnut",
                dataPoints: [
                    { label: "Data 1", y: 20 },
                    { label: "Data 2", y: 25 },
                    { label: "Data 3", y: 30 },
                    { label: "Data 4", y: 35 }
                ]
            }]
        });
        chart.render();
    }

    function getOpacityBasedOnScroll() {
        var chartElement = document.getElementById("chartContainer");
        var chartPosition = chartElement.getBoundingClientRect().top;
        var windowHeight = window.innerHeight;

        // Calculate the distance from the center of the screen
        var distanceFromCenter = Math.abs(windowHeight / 2 - chartPosition);

        // Adjust this value to control how quickly the fade happens
        var fadeRate = 0.5; 

        // Calculate opacity based on how close the chart is to the center of the screen
        var opacity = Math.max(1 - distanceFromCenter / (windowHeight * fadeRate), 0);

        return opacity;
    }

    window.onscroll = function() {
        var opacity = getOpacityBasedOnScroll();

        if (!chartRendered && opacity > 0) {
            renderChart();
            chartRendered = true;
        }

        document.getElementById("chartContainer").style.opacity = opacity;
    };
}




	window.onload = function() {
    var chartRendered = false;

    function renderChart() {
        var chart = new CanvasJS.Chart("chartContainer", {
            backgroundColor: "transparent", // No background
            data: [{
                type: "doughnut",
                dataPoints: [
                    { label: "Data 1", y: 20 },
                    { label: "Data 2", y: 25 },
                    { label: "Data 3", y: 30 },
                    { label: "Data 4", y: 35 }
                ]
            }]
        });
        chart.render();
    }

    window.onscroll = function() {
        var chartPosition = document.getElementById("chartContainer").getBoundingClientRect().top;
        var screenPosition = window.innerHeight / 1.3;

        if (!chartRendered && chartPosition < screenPosition) {
            renderChart();
            chartRendered = true;
        }
    };
}

</script>